<html><head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">

<title>Double Entry Accounting in a Relational Database</title>
</head><body vlink="#800080" link="#0000ff">

<p align="CENTRE"></p><h3><u>
Double Entry Accounting in a Relational Database
</u></h3><p></p>


<b><u></u></b><p align="JUSTIFY"><b><u>INTRODUCTION</u></b></p>
<b><u></u></b><u></u><p align="JUSTIFY">Many computer systems utilising a
 relational database contain some sort of accounting information. In the
 initial design and development stages there is often a debate about 
what type of accounting strategy should be used by the software to 
record this information. The decision is usually between a simple and 
cheap &#8216;single entry&#8217; accounting system and a more complex &#8216;double entry&#8217;
 accounting system.</p>
<p align="JUSTIFY">A &#8216;single entry&#8217; system is one where the numerical 
values being stored are only recorded once. In a &#8216;double entry&#8217; system 
each value is stored twice, once as a credit (a positive value), once as
 a debit (a negative value). There are a number of rules that control 
these values. These rules would be recognised by any trained accountant 
although they may not understand how it is stored in a relational 
database. The main rules are as follows:</p>
<ol>

<p align="JUSTIFY"></p><li>Every entry into the system must balance &#8211; i.e. the sum of any transaction must be zero.</li><p></p>
<p align="JUSTIFY"></p><li>The sum of all the values in the system at any one time must be zero (the &#8216;trial balance&#8217;).</li><p></p>
<p align="JUSTIFY"></p><li>No values can ever be amended or deleted. 
They must be negated with an opposing entry (a &#8216;contra&#8217;) and re-entered 
(&#8216;re-booked&#8217;). This provides a completely secure audit trail.</li><p></p></ol>

<b><u></u></b><p align="JUSTIFY"><b><u>APPLICABILITY OF DOUBLE ENTRY ACCOUNTING</u></b></p>
<b><u></u></b><u></u><p align="JUSTIFY">At the outset of a project the 
cost of a simple accounting system is always appealing. The complexity 
and effort of a full blown &#8216;double entry&#8217; system often seems difficult 
to justify. In reality going for a simple &#8216;single entry&#8217; system is 
usually a false economy. If the accounting information is just mirroring
 a paper system outside the database then a single entry system might be
 acceptable, however, if any of the following apply then a full &#8216;double 
entry&#8217; mechanism ought to be implemented from the outset:</p>
<ol>

<p align="JUSTIFY"></p><li>If the information will ever need to be audited by an accountant</li><p></p>
<p align="JUSTIFY"></p><li>If the information held is the sole record of ownership</li><p></p>
<p align="JUSTIFY"></p><li>If the information held represents high value assets.</li><p></p>
<p align="JUSTIFY"></p><li>If the system is likely to expand and grow in the future.</li><p></p></ol>

<b><u></u></b><p align="JUSTIFY"><b><u>A DOUBLE ENTRY EXAMPLE</u></b></p>
<b><u></u></b><u></u><p align="JUSTIFY">The key factor of a double entry
 system is the presence of a &#8216;cash book&#8217; account. This account contains 
the entries made when assets (e.g. money) are taken into or released 
from the accounting system. As such the total value of this account 
always matches the total value of the assets in the system.</p>
<p align="JUSTIFY">Using accountant&#8217;s &#8216;T charts&#8217; to represent this we 
use the following example that uses two accounts only. The &#8216;cash book&#8217; 
and an account in the name of &#8216;Smith&#8217;.</p>
<p align="JUSTIFY">(a) £300 is entered into this system to be allocated 
to the Smith account. The £300 is credited to the Smith account (credits
 are on the right, debits on the left). To match this a debit of £300 is
 allocated to the Cash Book.</p>
<p align="CENTER"><img src="gc_wp_ded_fichiers/1giftchart.gif" width="468" height="194"></p>
<p align="JUSTIFY">(b) If £50 is taken out of the system from the Smith 
account, £50 is debited from the Smith account and credited to the Cash 
Book.</p>
<p align="CENTER"><img src="gc_wp_ded_fichiers/2giftchart.gif" width="480" height="199"></p>
<p align="JUSTIFY">(c) If another account is added in the name of Pattel
 and £100 is transferred from Smith to Pattel then £100 is debited from 
Smith and £100 credited to Pattel.</p>
<p align="CENTER"><img src="gc_wp_ded_fichiers/3giftchart.gif" width="612" height="168"></p>
<p align="JUSTIFY">(d) To complete the picture £60 is taken out of the 
system from the Pattel account with a debt from Pattel and a credit to 
the Cash book. </p>
<p align="CENTER"><img src="gc_wp_ded_fichiers/4giftchart.gif" width="612" height="168"></p>
<p align="JUSTIFY">At the end of this the Smith account balance is £150,
 the Pattel account is £40 and the Cash Book is £-190, the negative sum 
of the other accounts. On this simple basis very complex asset tracking 
systems can be built.</p>
<b><u></u></b><p align="JUSTIFY"><b><u>THE ACCOUNTING DATA MODEL</u></b></p>
<b><u></u></b><u></u><p align="JUSTIFY">A simple data model that can be used to represent this information is illustrated below:</p>
<p align="CENTER"><img src="gc_wp_ded_fichiers/5giferd.gif" width="612" height="472"></p>
<p align="JUSTIFY">The POSTING table contains the actual accounting 
double entries. Keeping the figures in one table simplifies the 
mathematics dramatically. The primary key or part of the primary key of 
the POSTING table should be a system generated sequence number. It 
should also be generated in such a way that no gaps can appear in the 
sequence (through a transaction rolling back, for example). This is part
 of ensuring that no entries are ever deleted. The BATCH and JOURNAL 
tables are used to control the input of the double entries to this 
POSTING table. </p>
<p align="JUSTIFY">A JOURNAL entry is the data representation of any 
business transaction that will produce double entries &#8211; it represents a 
complete unit of work. I.e. all POSTING entries associated with the 
JOURNAL entry must be successfully completed or none must be completed. 
The numerical sum of all POSTING entries associated with a JOURNAL entry
 must also equal zero (the only way the total value contained in the 
system can be amended is though the Cash Book). Each transaction 
described in the example above would be represented by one JOURNAL 
entry.</p>
<p align="JUSTIFY">A BATCH entry reflects the more physical aspects of 
accounting data entry. It is used to group together JOURNAL entries into
 handy &#8216;chunks&#8217;, for example, a collection of cheques to be entered into
 the system, a collection of information from an Electronic Data 
Interface (EDI) or a global business process like the payment of 
interest to all accounts.</p>
<p align="JUSTIFY">The ACCOUNT table represents the owner of the assets 
in the system. In most systems the &#8216;pigs ear&#8217;, recursive, relationship 
to itself will not be needed. This is only required if a system of 
&#8216;nominee&#8217; type accounts is required where concepts of group ownership 
are mixed in with individual ownership.</p>
<p align="JUSTIFY">The ASSET TYPE table contains the list of asset types
 being held in the system. By making the asset type part of the POSTING 
primary key the system becomes a multi-asset (e.g multi-currency) 
system. Through use of this, the system can also track the ownership of 
other &#8216;de-materialised&#8217; assets where the actual ownership of any 
particular item isn&#8217;t required just the type and quantity owned. 
Examples of this type of asset includes shares and agricultural or 
pollution quota. It can also track &#8216;bearer&#8217; assets (where, for example, 
the fact that certificate number 12345 belongs to Mrs X is important).</p>
<p align="JUSTIFY">The above example is shown below as entries in this data model (the column list is kept as simple as possible for clarity).</p>
<p align="JUSTIFY">ACCOUNT</p>
<table width="422" border="1" cellpadding="7" cellspacing="1">
<tbody><tr><td valign="TOP" width="37%">
<p align="JUSTIFY"><b>Id</b></p></td>
<td valign="TOP" width="63%">
<p align="JUSTIFY"><b>Name</b></p></td>
</tr>
<tr><td valign="TOP" width="37%">
<p align="JUSTIFY">SMITH</p></td>
<td valign="TOP" width="63%">
<p align="JUSTIFY">Mr J Smith</p></td>
</tr>
<tr><td valign="TOP" width="37%">
<p align="JUSTIFY">PATTEL</p></td>
<td valign="TOP" width="63%">
<p align="JUSTIFY">Mr R Pattel</p></td>
</tr>
<tr><td valign="TOP" width="37%">
<p align="JUSTIFY">CASH</p></td>
<td valign="TOP" width="63%">
<p align="JUSTIFY">The Cash Book</p></td>
</tr>
</tbody></table>

<p align="JUSTIFY">JOURNAL</p>
<table width="422" border="1" cellpadding="7" cellspacing="1">
<tbody><tr><td valign="TOP" width="37%">
<p align="JUSTIFY"><b>Id <i>(as used above)</i></b></p></td>
<td valign="TOP" width="63%">
<p align="JUSTIFY"><b>Type</b></p></td>
</tr>
<tr><td valign="TOP" width="37%">
<p align="JUSTIFY">a</p></td>
<td valign="TOP" width="63%">
<p align="JUSTIFY">Deposit</p></td>
</tr>
<tr><td valign="TOP" width="37%">
<p align="JUSTIFY">b</p></td>
<td valign="TOP" width="63%">
<p align="JUSTIFY">Withdrawal</p></td>
</tr>
<tr><td valign="TOP" width="37%">
<p align="JUSTIFY">c</p></td>
<td valign="TOP" width="63%">
<p align="JUSTIFY">Transfer</p></td>
</tr>
<tr><td valign="TOP" width="37%">
<p align="JUSTIFY">d</p></td>
<td valign="TOP" width="63%">
<p align="JUSTIFY">Withdrawal</p></td>
</tr>
</tbody></table>

<p align="JUSTIFY">&nbsp;</p>
<p align="JUSTIFY">POSTING</p>
<table width="541" border="1" cellpadding="7" cellspacing="1">
<tbody><tr><td valign="TOP" width="30%">
<p align="JUSTIFY"><b>Id</b></p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY"><b>Account Id</b></p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY"><b>Journal Id</b></p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY"><b>Asset Type</b></p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY"><b>Amount</b></p></td>
</tr>
<tr><td valign="TOP" width="30%">
<p align="JUSTIFY">1</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">SMITH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">a</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">300</p></td>
</tr>
<tr><td valign="TOP" width="30%">
<p align="JUSTIFY">2</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">CASH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">a</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">-300</p></td>
</tr>
<tr><td valign="TOP" width="30%">
<p align="JUSTIFY">3</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">SMITH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">b</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">-50</p></td>
</tr>
<tr><td valign="TOP" width="30%">
<p align="JUSTIFY">4</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">CASH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">b</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">50</p></td>
</tr>
<tr><td valign="TOP" width="30%">
<p align="JUSTIFY">5</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">SMITH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">c</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">-100</p></td>
</tr>
<tr><td valign="TOP" width="30%">
<p align="JUSTIFY">6</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">PATTEL</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">c</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">100</p></td>
</tr>
<tr><td valign="TOP" width="30%">
<p align="JUSTIFY">7</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">PATTEL</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">d</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">-60</p></td>
</tr>
<tr><td valign="TOP" width="30%">
<p align="JUSTIFY">8</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">CASH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">d</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">60</p></td>
</tr>
<tr><td valign="TOP" width="30%">
<p>&nbsp;</p></td>
<td valign="TOP" width="19%">
<p>&nbsp;</p></td>
<td valign="TOP" width="16%">
<p>&nbsp;</p></td>
<td valign="TOP" width="18%">
<p>&nbsp;</p></td>
<td valign="TOP" width="18%">
<p>&nbsp;</p></td>
</tr>
</tbody></table>

<p align="JUSTIFY">The balance of the POSTING Amount column always being
 zero after every complete JOURNAL transaction (and the software must 
not allow an incomplete one). From the above the total in the Cash Book 
adds up to &#8211;190 which is the negative sum of the 150 belonging to Smith 
and the 40 belonging to Pattel.</p>
<p align="JUSTIFY">To expand this system into a multi-currency system a 
new asset type is added and used. If Mr Smith wished to change £20 into 
dollars at a rate of £1 to $1.5 the transaction is made though the Cash 
Book as follows (the required POSTING entries):</p>
<table width="541" border="1" cellpadding="7" cellspacing="1">
<tbody><tr><td valign="TOP" width="30%">
<p align="JUSTIFY"><b>Id</b></p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY"><b><b>Account Id</b></b></p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY"><b>Journal Id</b></p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY"><b>Asset Type</b></p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY"><b>Amount</b></p></td>
</tr>
<tr><td valign="TOP" width="30%">
<p align="JUSTIFY">9</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">SMITH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">e</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">-20</p></td>
</tr>
<tr><td valign="TOP" width="30%">
<p align="JUSTIFY">10</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">CASH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">e</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">20</p></td>
</tr>
<tr><td valign="TOP" width="30%">
<p align="JUSTIFY">11</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">CASH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">e</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">$</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">-30</p></td>
</tr>
<tr><td valign="TOP" width="30%">
<p align="JUSTIFY">12</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">SMITH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">e</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">$</p></td>
<td valign="TOP" width="18%">
<p align="JUSTIFY">30</p></td>
</tr>
</tbody></table>

<p align="JUSTIFY">&nbsp;</p>
<b><u></u></b><p align="JUSTIFY"><b><u>ACCOUNTING PERIODS</u></b></p>
<b><u></u></b><u></u><p align="JUSTIFY">Our accounting model so far is 
perfectly sound but could creak under high volumes as we can never 
delete anything. Most accounting requirements include the concept of an 
accounting period, maybe monthly, three monthly or yearly, for example. 
Whilst there is no need to constrain the logical requirement for an 
accounting period by tying it too closely to the physical model it 
provides a useful indication as to where to break flow of the data. The 
year end is often a convenient point, either the calendar year end or 
the financial year end. By adding a period indicator column to the 
POSTING table (and also to its primary key) the data can be split into 
discreet time chunks that can be validated independently. If in the 
above example the next set of entries fell into the next accounting 
period the balances outstanding are brought forward as summary entries 
in the next period first (leaving out the currency exchange example for 
simplicity).</p>
<p align="JUSTIFY">Firstly the balances for the previous period are cleared down.</p>
<table width="640" border="1" cellpadding="7" cellspacing="1">
<tbody><tr><td valign="TOP" width="13%">
<p align="JUSTIFY"><b>Id</b></p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY"><b>Account Id</b></p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY"><b>Journal Id</b></p></td>
<td valign="TOP" width="21%">
<p align="JUSTIFY"><b>Account Period</b></p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY"><b>Asset Type</b></p></td>
<td valign="TOP" width="15%">
<p align="JUSTIFY"><b>Amount</b></p></td>
</tr>
<tr><td valign="TOP" width="13%">
<p align="JUSTIFY">9</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">SMITH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">e</p></td>
<td valign="TOP" width="21%">
<p align="JUSTIFY">YEAR 1</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="15%">
<p align="JUSTIFY">-150</p></td>
</tr>
<tr><td valign="TOP" width="13%">
<p align="JUSTIFY">10</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">CASH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">e</p></td>
<td valign="TOP" width="21%">
<p align="JUSTIFY">YEAR 1</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="15%">
<p align="JUSTIFY">150</p></td>
</tr>
<tr><td valign="TOP" width="13%">
<p align="JUSTIFY">11</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">CASH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">e</p></td>
<td valign="TOP" width="21%">
<p align="JUSTIFY">YEAR 1</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="15%">
<p align="JUSTIFY">40</p></td>
</tr>
<tr><td valign="TOP" width="13%">
<p align="JUSTIFY">12</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">PATTEL</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">e</p></td>
<td valign="TOP" width="21%">
<p align="JUSTIFY">YEAR 1</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="15%">
<p align="JUSTIFY">-40</p></td>
</tr>
</tbody></table>

<p align="JUSTIFY">Then the balances are carried forward to the next period.</p>
<table width="640" border="1" cellpadding="7" cellspacing="1">
<tbody><tr><td valign="TOP" width="13%">
<p align="JUSTIFY"><b>Id</b></p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY"><b>Account Id</b></p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY"><b>Journal Id</b></p></td>
<td valign="TOP" width="21%">
<p align="JUSTIFY"><b>Account Period</b></p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY"><b>Asset Type</b></p></td>
<td valign="TOP" width="15%">
<p align="JUSTIFY"><b>Amount</b></p></td>
</tr>
<tr><td valign="TOP" width="13%">
<p align="JUSTIFY">13</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">SMITH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">e</p></td>
<td valign="TOP" width="21%">
<p align="JUSTIFY">YEAR 2</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="15%">
<p align="JUSTIFY">150</p></td>
</tr>
<tr><td valign="TOP" width="13%">
<p align="JUSTIFY">14</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">CASH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">e</p></td>
<td valign="TOP" width="21%">
<p align="JUSTIFY">YEAR 2</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="15%">
<p align="JUSTIFY">-150</p></td>
</tr>
<tr><td valign="TOP" width="13%">
<p align="JUSTIFY">15</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">CASH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">e</p></td>
<td valign="TOP" width="21%">
<p align="JUSTIFY">YEAR 2</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="15%">
<p align="JUSTIFY">- 40</p></td>
</tr>
<tr><td valign="TOP" width="13%">
<p align="JUSTIFY">16</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">PATTEL</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">e</p></td>
<td valign="TOP" width="21%">
<p align="JUSTIFY">YEAR 2</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="15%">
<p align="JUSTIFY">40</p></td>
</tr>
</tbody></table>

<p align="JUSTIFY">After an appropriate period of time the previous YEAR 1 period can be archived and deleted from the system.</p>
<b><u></u></b><p align="JUSTIFY"><b><u>AGGREGATING TRANSACTIONS</u></b></p>
<b><u></u></b><u></u><p align="JUSTIFY">There are some activities that 
occur within accounting systems that are large scale changes that affect
 many or all of the accounts. For example, payment of interest to all 
accounts as a percentage of their current balance or a global cut of 
quota by a certain percentage. The end of year example above also falls 
into this category. The end of year entries should all be done under the
 same JOURNAL (although it could be argued that separate 
currencies/assets could be done under separate journals) but it is quite
 acceptable to aggregate the entries to the Cash Book. The accounting 
rule requirements will still be met but it will simplify the work and 
volumes involved by up to 50%. The POSTING entries in the above end of 
year example then become:</p>
<table width="640" border="1" cellpadding="7" cellspacing="1">
<tbody><tr><td valign="TOP" width="13%">
<p align="JUSTIFY"><b>Id</b></p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY"><b>Account Id</b></p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY"><b>Journal Id</b></p></td>
<td valign="TOP" width="21%">
<p align="JUSTIFY"><b>Account Period</b></p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY"><b>Asset Type</b></p></td>
<td valign="TOP" width="15%">
<p align="JUSTIFY"><b>Amount</b></p></td>
</tr>
<tr><td valign="TOP" width="13%">
<p align="JUSTIFY">9</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">SMITH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">e</p></td>
<td valign="TOP" width="21%">
<p align="JUSTIFY">YEAR 1</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="15%">
<p align="JUSTIFY">-150</p></td>
</tr>
<tr><td valign="TOP" width="13%">
<p align="JUSTIFY">10</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">CASH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">e</p></td>
<td valign="TOP" width="21%">
<p align="JUSTIFY">YEAR 1</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="15%">
<p align="JUSTIFY">190</p></td>
</tr>
<tr><td valign="TOP" width="13%">
<p align="JUSTIFY">11</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">PATTEL</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">e</p></td>
<td valign="TOP" width="21%">
<p align="JUSTIFY">YEAR 1</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="15%">
<p align="JUSTIFY">-40</p></td>
</tr>
<tr><td valign="TOP" width="13%">
<p align="JUSTIFY">12</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">SMITH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">e</p></td>
<td valign="TOP" width="21%">
<p align="JUSTIFY">YEAR 2</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="15%">
<p align="JUSTIFY">150</p></td>
</tr>
<tr><td valign="TOP" width="13%">
<p align="JUSTIFY">13</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">CASH</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">e</p></td>
<td valign="TOP" width="21%">
<p align="JUSTIFY">YEAR 2</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="15%">
<p align="JUSTIFY">-190</p></td>
</tr>
<tr><td valign="TOP" width="13%">
<p align="JUSTIFY">14</p></td>
<td valign="TOP" width="19%">
<p align="JUSTIFY">PATTEL</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">e</p></td>
<td valign="TOP" width="21%">
<p align="JUSTIFY">YEAR 2</p></td>
<td valign="TOP" width="16%">
<p align="JUSTIFY">£</p></td>
<td valign="TOP" width="15%">
<p align="JUSTIFY">40</p></td>
</tr>
</tbody></table>

<p align="JUSTIFY">&nbsp;</p>
<b><u></u></b><p align="JUSTIFY"><b><u>BATCH ENTRY</u></b></p>
<b><u></u></b><u></u><p align="JUSTIFY">A batching mechanism is often 
used to facilitate data entry to this accounting system. In its historic
 form this is what has happened for the processing of cheques. An 
account clerk would be given a pile of ten cheques, a batch number and 
the total value of the cheques. An entry screen would then be used by 
the clerk to record the cheques as &#8216;unauthorised&#8217; entries. At the BATCH 
level the number of cheques and their total value is recorded and only 
when the number of items entered and their totals match these figures is
 the user allowed to commit the batch. Once this activity is complete 
the batch is passed to another member of staff who checks the contents 
of the batch (either on-screen or with the aide of a report) and then 
&#8216;authorises&#8217; the batch if it is correct. This process is generally 
referred to as &#8216;maker/checker&#8217; and can be adapted for the manual entry 
of any primary asset data. The concept of a Batch is also useful for 
electronic data transfer as it provides a method of aggregation for 
audit trail and correction processing. As a rule it is sensible to keep 
the details of &#8216;unauthorised&#8217; entries in separate tables from those 
&#8216;pucker&#8217; double entries made by the &#8216;authorisation&#8217; process into the 
POSTING table. If this is done it is also possible to simplify the 
programming effort by creating tables more appropriate to the business 
function in hand. For example, in the above cheque entry process the 
clerk will only have to identify one account. The other account, the 
Cash Book, is implicit as the movement of money will always be from the 
Cash Book to the owners account. A CHEQUE table would only require one 
Account column where as a hypothetical FUND TRANSFER table would need 
two, a &#8216;From Account&#8217; column and a &#8216;To Account&#8217; column. </p>
<p align="JUSTIFY">This is where most of the confusion over the concepts
 of double-entry principles arise. Most people only come across simple 
paper Cash Books in the normal course of domestic events. In a paper 
Cash Book used for example, to record a club&#8217;s funds, only one entry per
 transaction is required. This is still an implicit double entry system 
because, as only one account is represented (the &#8216;club&#8217; in this example)
 the opposite entry can only ever go against the Cash Book &#8211; it is only 
ever a movement into the system (into club funds) or out of the system 
(paid out of the club funds). This is also where the other main source 
of confusion occurs. An individual&#8217;s bank statement will show money paid
 into the bank account as a &#8216;credit&#8217; because the individual is a 
creditor to the bank &#8211; they have that individual&#8217;s money. If that same 
individual ran a Cash Book this figure should be represented as a &#8216;debt&#8217;
 &#8211; the bank owes the money/is in debt to that individual. The money is 
out of that individuals system and in the bank&#8217;s.</p>
<b><u></u></b><p align="JUSTIFY"><b><u>CODE DESIGN</u></b></p>
<b><u></u></b><u></u><p align="JUSTIFY">The modules required to support a
 double entry accounting system are best designed using a tiered, Object
 Oriented (OO), approach. The tiers used are as follows</p>
<ol>

<p align="JUSTIFY"></p><li>Interface processing (user and electronic)</li><p></p>
<p align="JUSTIFY"></p><li>Business processing</li><p></p>
<p align="JUSTIFY"></p><li>Database processing</li><p></p></ol>

<p align="JUSTIFY">A full design is dependent of the type of system required but the following hypothetical modules could exist in each layer.</p>
<p align="JUSTIFY">PostEntry: A module to make a basic POSTING entry is 
required at the database layer. This will insert a record adding 
timestamps and sequenced identifiers automatically. It cannot delete or 
update records and no other module will be allowed to update, insert or 
delete records apart from an archiving module to do deletions. The 
POSTING table is read-only for all other purposes.</p>
<p align="JUSTIFY">MakeDeposit, MakeWithdrawal, MakeTransfer: Modules to
 perform basic business process will exist at the Business layer. They 
will call PostEntry in the appropriate manner.</p>
<p align="JUSTIFY">ChequeEntry and ChequeAuthorisation screens, 
ReceiveBACS interface module: Modules to link the system to the outside 
world will reside in the Interface layer. These modules will call the 
appropriate Business layer objects to perform the business functions. In
 this way the same processing can be guarantied regardless of the method
 of entry because, for example, ChequeEntry and ReceiveBACS would both 
call the same MakeDeposit module.</p>
<p align="JUSTIFY">This methodology can be used to a lesser or greater 
degree depending on the complexity of the system and the adherence to 
&#8216;purist&#8217; OO principles. It may be sensible, for example, to allow 
reports (e.g. TestTrialBalance) to be written to access the tables 
directly from the Interface layer &#8211; rather than building intermediate 
layer modules to do the work.</p>
<p align="CENTER"><img src="gc_wp_ded_fichiers/6gifmod.gif" width="622" height="533"></p>
<p>&nbsp;</p>
<b><u></u></b><p><b><u>THE TRIAL BALANCE</u></b></p>
<b><u></u></b><u></u><p>The &#8216;trial balance&#8217; is the main method of 
&#8216;proving&#8217; the integrity of any accounting system. If all the entries 
made into the system have been made in accordance to the double entry 
rules and are not corrupt in any way then the sum of all these entries 
will always equal zero. The chance of an equal and opposite, matching, 
error occurring is so small that it can be completely discounted. The 
best way to run a trial balance is to start at the highest level and 
only break the figures down if a problem occurs. Using the above table 
structure the parameters for these queries are as follows:</p>
<p>1<sup>st</sup> 	Sum the values in the POSTING.Amount column.</p>
<p>Then if that fails</p>
<p>2<sup>nd</sup>	Sum the values in the POSTING.Amount column but broken down by Asset Type and Account Period.</p>
<p>This should indicate where the problem lies. The fact that the sum of
 every JOURNAL should also equal zero can then be used to track down the
 POSTING entries that are in error.</p>
<b><u></u></b><p><b><u>JOURNAL ENTITY SUPER-TYPES</u></b></p>
<b><u></u></b><u></u><p>The JOURNAL table is the simple representation 
of an entity or entities that are often more complex and involve super 
and sub type relationships. The JOURNAL entity could be broken into 
MATERIALISED and DEMATERIALISED (these might have different attributes 
because things like certificate numbers or physical location would be 
required for the MATERIALISED type assets). Alternatively the asset 
types could define the JOURNAL sub-types resolving them into CURRENCY 
TRANSFERS, STOCK TRANSFERS, COMMODITY TRANSFERS each having different 
attributes. Entities with super and sub types can be resolved into 
tables in one of four ways (these are standard data modelling 
principles):</p>
<ol>

<li>Have one big table with many optional columns to represent the sub-type attributes.</li>
<li>Have a separate table for each sub-type duplicating the columns that
 are common (those columns that are inherited from the super-type&#8217;s 
attributes).</li>
<li>Split the entities so that the super-type has one table with its 
columns and this must be joined to other tables that represent each sub 
type which contain the sub-type columns only. An &#8216;arc&#8217; is placed on the 
one-to-one relationships between the sub-types and the super type.</li>
<li>Split the entities as in (3) above but duplicate the super-type table columns on the sub-type tables.</li></ol>

<p>There are pros and cons for the use of each of these methods. From a 
double entry accounting perspective it is useful to have the super-type 
table to provide a natural focus for the POSTING entries &#8211; this would 
rule out option (2). Otherwise option (1) is probably best for a simple 
accounting system (which is effectively what the example used through 
out this article is &#8211; the JOURNAL Type column acting as the sub-type 
discriminator column) but option (3) would probably be best for a 
complex system with asset types with wildly differing properties.</p>
<p>&nbsp;</p>
<p>Author:  Michael Wigley</p>
<p>(Michaelwigley@bcs.org.uk)</p>
</body></html>